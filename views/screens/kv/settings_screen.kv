#:import utils kivy.utils
#:import dp kivy.metrics.dp

<SettingsScreen>:
    BoxLayout:
        orientation: 'vertical'
        
        # Header with back button
        Header:
        
        # Settings content in a scroll view
        ScrollView:
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: dp(16)
                spacing: dp(12)
                # Camera settings
                MDCard:
                    orientation: "vertical"
                    padding: dp(16)
                    size_hint_x: None
                    spacing: dp(12)
                    width: dp(360)
                    size_hint_y: None
                    height: self.minimum_height
                    md_bg_color: 1, 1, 1, 1
                    radius: [8]
                    pos_hint: {"center_x": 0.5}
                    
                    MDLabel:
                        text: "Camera Settings"
                        halign: "left"
                        theme_text_color: "Primary"
                        font_style: "H6"
                        size_hint_y: None
                        height: dp(48)
                    
                    MDSeparator:
                        height: "1dp"
                    
                    # Camera flip
                    BoxLayout:
                        orientation: "horizontal"
                        height: dp(60)
                        size_hint_y: None
                        size_hint_x: 1
                        spacing: dp(8)
                        padding: [0, 0, 22, 0]
                        
                        MDLabel:
                            text: "Flip Camera Horizontally"
                            theme_text_color: "Primary"
                            size_hint_x: 1
                        
                        MDSwitch:
                            size_hint_x: None
                            width: dp(48)
                            active: root.camera_flip_horizontal
                            on_active: root.toggle_camera_flip_horizontal()
                        
                    
                    BoxLayout:
                        orientation: "horizontal"
                        height: dp(60)
                        size_hint_y: None
                        spacing: dp(8)
                        padding: [0, 0, 22, 0]
                        
                        MDLabel:
                            text: "Flip Camera Vertically"
                            theme_text_color: "Primary"
                            size_hint_x: 1
                        
                        MDSwitch:
                            size_hint_x: None
                            width: dp(48)
                            active: root.camera_flip_vertical
                            on_active: root.toggle_camera_flip_vertical()
                    
                    # Camera resolution
                    BoxLayout:
                        orientation: "horizontal"
                        height: dp(60)
                        size_hint_y: None
                        spacing: dp(8)
                        
                        MDLabel:
                            text: "Camera Resolution"
                            theme_text_color: "Primary"
                            size_hint_x: 1
                        
                        Spinner:
                            id: camera_resolution
                            text: root.camera_resolution
                            values: ["640x480", "800x600", "1280x720", "1920x1080"]
                            on_text: root.set_camera_resolution(self.text)
                    
                    # Camera quality
                    BoxLayout:
                        orientation: "horizontal"
                        height: dp(60)
                        size_hint_y: None
                        spacing: dp(8)
                        
                        MDLabel:
                            text: "Image Quality: " + str(int(quality_slider.value)) + "%"
                            theme_text_color: "Primary"
                            size_hint_x: 1
                        
                        MDSlider:
                            id: quality_slider
                            min: 10
                            max: 100
                            value: root.camera_quality
                            on_value: root.set_camera_quality(self.value)
                
                # App settings
                MDCard:
                    orientation: "vertical"
                    padding: dp(16)
                    size_hint_x: None
                    spacing: dp(12)
                    width: dp(360)
                    size_hint_y: None
                    height: self.minimum_height
                    md_bg_color: 1, 1, 1, 1
                    radius: [8]
                    pos_hint: {"center_x": 0.5}
                    
                    MDLabel:
                        text: "App Settings"
                        halign: "left"
                        theme_text_color: "Primary"
                        font_style: "H6"
                        size_hint_y: None
                        height: dp(48)
                    
                    MDSeparator:
                        height: "1dp"
                    
                    # Auto detect documents
                    BoxLayout:
                        orientation: "horizontal"
                        height: dp(60)
                        size_hint_y: None
                        spacing: dp(8)
                        padding: [0, 0, 22, 0]
                        
                        MDLabel:
                            text: "Auto-detect Documents"
                            theme_text_color: "Primary"
                            size_hint_x: 1
                        
                        MDSwitch:
                            size_hint_x: None
                            width: dp(48)
                            active: root.auto_detect_documents
                            on_active: root.toggle_auto_detect_documents()
                    
                    # Save original images
                    BoxLayout:
                        orientation: "horizontal"
                        height: dp(60)
                        size_hint_y: None
                        spacing: dp(8)
                        padding: [0, 0, 22, 0]
                        
                        MDLabel:
                            text: "Save Original Images"
                            theme_text_color: "Primary"
                            size_hint_x: 1
                        
                        MDSwitch:
                            size_hint_x: None
                            width: dp(48)
                            active: root.save_original_images
                            on_active: root.toggle_save_original_images()
                
                # Theme settings
                MDCard:
                    orientation: "vertical"
                    padding: dp(16)
                    size_hint_x: None
                    spacing: dp(12)
                    width: dp(360)
                    size_hint_y: None
                    height: self.minimum_height
                    md_bg_color: 1, 1, 1, 1
                    radius: [8]
                    pos_hint: {"center_x": 0.5}
                    
                    MDLabel:
                        text: "Theme Settings"
                        halign: "left"
                        theme_text_color: "Primary"
                        font_style: "H6"
                        size_hint_y: None
                        height: dp(48)
                    
                    MDSeparator:
                        height: "1dp"
                    
                    # Dark mode
                    BoxLayout:
                        orientation: "horizontal"
                        height: dp(60)
                        size_hint_y: None
                        spacing: dp(8)
                        padding: [0, 0, 22, 0]
                        
                        MDLabel:
                            text: "Dark Mode"
                            theme_text_color: "Primary"
                            size_hint_x: 1
                        
                        MDSwitch:
                            size_hint_x: None
                            width: dp(48)
                            on_active: app.root.toggle_theme()
                
                # Save button
                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: dp(60)
                    padding: dp(16)
                    
                    Widget:
                        size_hint_x: 0.7
                    
                    MDRaisedButton:
                        text: "Save Settings"
                        on_release: root.save_settings() 